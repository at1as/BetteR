<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>BetteR &mdash; A REST API Testing Utility</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="mainCSS.css">
    <script src="page_actions.js" type="text/javascript"></script>
</head>

<body>
    <div id="header">
        <div class="container" style="margin:0px auto 0px auto;">
            <div id="header-title" style="display:inline-block">
                <h1 style="min-width:100%;">BetteR &mdash; A REST API Testing Utility.</h1>
            </div>
            <div style="display:inline-block; float:right; margin-right:10px; margin-left:15px;">
              <form id="form0" name="quit-application" method="get" action="/quit" target="_self" enctype="multipart/form-data">
                <input type="submit" value="Quit" id="quit-button" style="height:100%; margin-top:8px; display:inline-block; width:40px;">
              </form>
            </div>
            <div style="display:inline-block; float:right; margin-left:10px;">
                <div id="settings-button" onclick="modalToggle('load-dialog-modal')" style="height:100%; margin-top:8px; display:inline-block">Settings</div>
            </div>
            <div style="display:inline-block; float:right; margin-right:10px;">
                <div id="file-upload-button" onclick="modalToggle('file-upload-modal')" style="height:100%; margin-top:8px; display:inline-block">File Upload</div>
            </div>
        </div>
    </div>
    <div class="container">
        <form id="form1" name="fullRequestData" method="post" action="/" target="_self" enctype="multipart/form-data">
            <div>
                <% if @visible[0] == "hidden"%>
                    <input type="hidden" id="serveURLDiv" name="serveURLDiv" value="hidden">
                <% else %>
                    <input type="hidden" id="serveURLDiv" name="serveURLDiv" value="displayed">
                <% end %>
                <h2><div class="head" id="headingReq" onclick="toggleRequestVisibility()">[&ndash;] Request</div></h2>
                <div class="box" id="path">
                    <select id="requestType" name="requestType">
                        <% @requests.each do |request| %>
                            <option value="<%= request %>"><%= request %></option>
                        <% end %>
                    </select>
                    <input type="text" value="<%= h(params[:url]) %>" name="url" id="url" placeholder=" URL" class="widthRemainder"/>
                    <select id="times" name="times">
                      <% @times.each do |number| %>
                        <% if number == "1" %>
                          <option value="<%= number %>"><%= number %> time</option>
                        <% else %>
                          <option value="<%= number %>"><%= number %> times</option>
                        <% end %>
                      <% end %>
                    </select>
                    <div class="close" id="closeURL" onclick="clearURL()">X</div>
                </div>
            </div>
            <div>
                <% if @visible[1] == "hidden"%>
                    <input type="hidden" id="serveAuthDiv" name="serveAuthDiv" value="hidden">
                <% else %>
                     <input type="hidden" id="serveAuthDiv" name="serveAuthDiv" value="displayed">
               <% end %>
                <h2><div class="head" id="headingAuth" onclick="toggleAuthVisibility()">[&ndash;] Authentication</div></h2>
                <div class="box" id="auth">
                    <div id="authSelect">
                        <span style="display:inline-block; white-space:nowrap; margin-top:5px;margin-bottom:5px;">
                            <label for="basicAuthSelect">
                                <input id="basicAuthSelect" type="radio" name="authType" value="basic" checked="true" style="width:14px;">Basic
                            </label>
                            <label for="digestAuthSelect">
                                <input id="digestAuthSelect" type="radio" name="authType" value="digest" style="width:14px;">Digest
                            </label>
                        </span>
                    </div>
                    <input type="text" value="<%=h(params[:usr])%>" name="usr" id="usr" placeholder=" Username"  />
                    <input type="text" value="<%=h(params[:pwd])%>" name="pwd" id="pwd" placeholder=" Password" />
                    <div class="close" id="closeAuth" onclick="clearAuthCredentials()">X</div>
                </div>
            </div>
            <div>
                <% if @visible[2] == "hidden"%>
                    <input type="hidden" id="serveHeaderDiv" name="serveHeaderDiv" value="hidden">
                <% else %>
                     <input type="hidden" id="serveHeaderDiv" name="serveHeaderDiv" value="displayed">
               <% end %>
                <input type="hidden" id="headerCount" name="headerCount" value="1">
                <h2><div class="head" id="headingHead" onclick="toggleHeaderVisibility()">[&ndash;] Headers</div></h2>
                <div class="box" id="headers">
                    <div id="headerfieldsAll">
                    <% @headerHash.each_with_index do |(key, value), index| %>
                        <div id="headerfields<%= index %>" style="margin-bottom:2px;" >
                            <input type="text" value="<%=key%>" name="key<%=index%>" id="key<%=index%>" placeholder=" Name" class="key" />
                            <input type="text" value="<%=value%>" name="value<%=index%>" id="value<%=index%>" placeholder=" Value" class="value" />
                            <div class="close" id="close<%= index %>" onclick="removeRow(this)">X</div>
                        </div>
                    <% end %>
                    </div>
                    <div>
                        <input type="button" value="Add<%=h(params[:add])%>" id="add" class="width25" onclick="addNewHeader()"/>
                    </div>
                </div>
            </div>
            <div>
                <% if @visible[3] == "hidden"%>
                    <input type="hidden" id="servePayloadDiv" name="servePayloadDiv" value="hidden">
                <% else %>
                    <input type="hidden" id="servePayloadDiv" name="servePayloadDiv" value="displayed">
                <% end %>
                <h2><div class="head" id="headingData" onclick="toggleDataVisibility()">[&ndash;] Payload</div></h2>
                <div class="box" id="data">
                    <textarea value="<%=h(params[:payload])%>" name="payload" id="payload" placeholder=" Payload Data"><%=h(params[:payload])%></textarea>
                </div>
            </div>
            <div style="margin-top:5px, padding-top: 3px, padding-bottom: 4px">
                <input type="submit" value="Send" id="submit" class="width25" style="margin-bottom:10px;"/>
                <input type="button" value="Clear All" id="submit" class="width25" onclick="clearAllFields()" style="margin-bottom:10px;"/>
            </div>
            <% if @formResponse == true %>
            <div>
                <% if @visible[4] == "hidden"%>
                    <input type="hidden" id="serveResultsDiv" name="serveResultsDiv" value="hidden">
                <% else %>
                    <input type="hidden" id="serveResultsDiv" name="serveResultsDiv" value="displayed">
                <% end %>
                <h2><div class="head" id="headingResults" style="margin-top:10px" onclick="toggleResultsVisibility()">[&ndash;] Results</div></h2>
                <div class="box" id="results">
                    <ul>
                        <li style="display:inline;" id="viewResponseTab">
                            <a onclick="hideReq()" id="responseDataText" style="color:#000000">Response Data</a>
                        </li>
                        <li style="display:inline" id="viewResponseHeadersTab">
                            <a onclick="hideRespData()"id="responseHeaderText">Response Headers</a>
                        </li>
                        <li style="display:inline" id="viewRequestTab">
                            <a onclick="hideResp()" id="requestHeaderText">Request Body</a>
                        </li>
                    </ul>
                    <div >
                        <textarea style="min-height:180px; margin-top:10px; overflow:scroll" id="resultsBox"><%= @returnBody.to_s %>
                            &#10----&#10Response: <%= @returnCode.to_s %> &#10Request Time: <%= @returnTime.to_s %> seconds
                        </textarea>
                        <textarea style="min-height:180px; margin-top:10px; overflow:scroll; display:none; font-size:15px;" id="resultsBoxHead"><%= @statCodeReturn.to_s %></textarea>
                        <textarea style="min-height:180px; margin-top:10px; overflow:scroll; display:none; font-size:15px;" id="resultsBoxcURL"><%= @requestOptions.to_s %></textarea>
                    </div>
                </div>
            </div>
            <% end %>
            <!-- MODAL GRAY BACKGROUND -->
            <div id="dialog-background-blur" style="visibility:hidden" onclick="modalHideAll()"></div>
            <!-- BEGIN SETTINGS MODAL-->
            <div id="load-dialog-modal" title="Settings" style="border-radius:4px; visibility:hidden" onclick="returnFalse(event)">
                <p style="font-size:15px; margin-top:0px"><strong>Configuration:</strong></p>
                <div style="display:inline-block;width:100%">
                    <label for="followlocation">
                        <input type="checkbox" name="followlocation" id="followlocation" style="float:right"
                        <% if @follow == true %>checked<% end %>>
                        Follow Redirects?<br/>
                    </label>
                    <label for="verbose">
                        <input type="checkbox" name="verbose" id="verbose" style="float:right"
                        <% if @verbose == true %>checked<% end %>>
                        Verbose Response?<br/>
                    </label>
                    <label for="ssl_verifypeer">
                        <input type="checkbox" name="ssl_verifypeer" id="ssl_verifypeer" style="float:right"
                        <% if @ssl == true %>checked<% end %>>
                        Verify SSL Peers?<br/>
                    </label>
                    <label for="enableLogging">
                        <input type="checkbox" name="enableLogging" id="enableLogging" style="float:right"
                        <% if @loggingOn == true %>checked<% end %>>
                        Log Requests?<br/>
                    </label>
                    <label for="timeoutInterval">
                        <select id="timeoutInterval" name="timeoutInterval" style="float:right">
                            <% @timeout.each do |interval| %>
                                <option value=<%= interval %>
                                    <% if h(params[:timeoutInterval]) == interval%>selected<% end %> ><%= interval %>
                                </option>
                            <% end %>
                        </select>
                        <span style="margin-right:30px;">Timeout Inteval:</span>
                    </label>
                </div>
            </div>
            <!-- END SETTINGS MODAL -->
            <!-- BEGIN FILE UPLOAD MODAL -->
            <!--<div id="dialog-background-blur" style="visibility:hidden" onclick="modalToggle('file-upload-modal')">-->
            <div id="file-upload-modal" title="File Upload" style="border-radius:4px; visibility:hidden" onclick="returnFalse(event)">
                <p style="font-size:15px; margin-top:0px"><strong>Attach File to Request:</strong></p>
                <div>
                    <input type="file" id="datafile" name="datafile" style="width:100%; background-color:#CCCCCC; box-shadow:none;">
                </div>
                <div style="margin-top:10px;">
                    <input type="button" value=" OK" onclick="modalToggle('file-upload-modal')">
                </div>
            </div>
            <!--</div> -->
            <!-- END FILE UPLOAD MODAL -->
        </form>
    </div>
</body>
</html>
